# For documentation on the Go.CD YAML format, see
# https://docs.gocd.org/17.5.0/advanced_usage/pipelines_as_code.html
# https://github.com/tomzo/gocd-yaml-config-plugin

pipelines:
  parliament-ruby:
    group: parliament-ruby
    label_template: "${COUNT}"

    materials:
      parliament-ruby-git:
        git: https://github.com/jammycakes/ukpds.parliament-ruby.git
        branch: master
        auto_update: true
    stages:
      - release:
          approval: manual
          jobs:
            release:
              tasks:
                - exec:
                    run_if: passed
                    command: make
                    arguments:
                      - build

environments:
  Web.Linux:
    pipelines:
      - parliament-ruby
